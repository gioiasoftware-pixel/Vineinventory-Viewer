READ ME Vineinventory Viewer

# ğŸ· Vineinventory Viewer â€” Mockup 1 (clean)

Frontend **solo lettura** per mostrare lâ€™inventario dellâ€™utente, aperto da un link temporaneo generato dal bot Telegram.  
Design pulito (granaccia / bianco / nero), sidebar filtri, barra di ricerca, tabella e pulsante **Download CSV**.

> **Nota a Cursor:** guida il mio flusso di lavoro. Se serve un mio intervento (es. fornire URL processor, logo, test token), **dimmi esattamente cosa devo fare**, in che file e come verificarlo. Sii severo e proponi la soluzione migliore quando utile.

---

## ğŸ¯ Obiettivo rapido
- Quando lâ€™utente scrive al bot â€œVedi tuttoâ€, riceve un **link con token** `?token=...`.
- Aprendo il link, questo viewer:
  - legge il token,
  - chiama il **processor** (`/api/inventory/snapshot?token=...`),
  - mostra **subito** tabella + ricerca + filtri + CSV.
- Se il token Ã¨ scaduto â†’ messaggio â€œLink scaduto o non validoâ€.

---

## ğŸ—‚ Struttura del progetto (attesa)

/assets/logo.png â† logo fornito (granaccia)
/index.html â† markup mockup 1 (pulito)
/styles.css â† tema (NO pennellate, NO pallini)
/app.js â† fetch snapshot, filtri, ricerca, CSV
/README.md â† questo file

markdown
Copia codice

**Cursor â€” Cosa devi fare:**
1. Genera questi file (HTML/CSS/JS) seguendo il mockup fornito (immagine allegata).
2. Usa palette granaccia/bianco/nero, typography Inter (o sistema).
3. Implementa: barra ricerca, sidebar filtri (Tipologia, Annata, Cantina), tabella (Nome, Annata, QuantitÃ , Prezzo), pulsante **Download CSV**.
4. Nessuno sfondo decorativo.
5. Responsive base (mobile: sidebar sopra, tabella sotto).

---

## ğŸ”Œ API richieste (dal Processor)

- **Snapshot pronto**
  - `GET /api/inventory/snapshot?token=JWT`
  - **200** â†’  
    ```json
    {
      "rows": [
        {"name":"Brunello di Montalcino","winery":"Biondi Santi","vintage":2017,"qty":1,"price":49.00,"type":"Rosso"}
      ],
      "facets": {
        "type": {"Rosso":150,"Bianco":84},
        "vintage": {"2017":23,"2020":32},
        "winery": {"Biondi Santi":5,"Gaja":3}
      },
      "meta": {"total_rows":234,"last_update":"2025-11-03T15:32:00Z"}
    }
    ```
  - **401/410** â†’ token scaduto/non valido.

- **CSV**
  - `GET /api/inventory/export.csv?token=JWT`
  - `Content-Type: text/csv`

**Cursor â€” Cosa devi implementare:**
- In `app.js` chiama lo **snapshot** con `?token=...` dalla querystring.
- Popola meta (â€œ234 records â€¢ Last updated 5 hours agoâ€), filtri e tabella.
- `Download CSV` â†’ punta a `/api/inventory/export.csv?token=...`.
- Se la fetch fallisce con 401/410 â†’ mostra banner â€œLink scaduto o non validoâ€.

---

## âš™ï¸ Configurazioni

In `app.js` prevedi un piccolo oggetto `CONFIG`:

```js
const CONFIG = {
  apiBase: "",                         // se vuoto usa lo stesso dominio del viewer
  endpointSnapshot: "/api/inventory/snapshot",
  endpointCsv: "/api/inventory/export.csv",
  pageSize: 50
};
Io â€” Cosa devo fare:

Se il viewer Ã¨ su un dominio diverso dal processor, dimmi dove impostare apiBase.

Ti fornisco un token di test (falso o reale) per verificare localmente.

Ti do il logo in /assets/logo.png (allegato).

ğŸ§ª Test locale (senza backend)
Avvio server statico:

bash
Copia codice
npx serve .
# oppure
python -m http.server 8080
Apro http://localhost:3000/?token=FAKE

Cursor: se non ho backend, inserisci un mock in app.js:

se ?token=FAKE, carica uno snapshot fittizio per vedere UI/filtri/tabella.

âœ… Criteri di accettazione (mockup 1)
 UI identica al mockup: logo a sinistra, titolo Vineventory, meta (â€œ234 records â€¢ Last updated ...â€), barra ricerca a destra, pulsante Download CSV.

 Sidebar â€œFiltersâ€ con sezioni: Tipologia, Annata, Cantina (clic â†’ filtro attivo evidenziato).

 Tabella con colonne: Nome, Annata, QuantitÃ , Prezzo (â‚¬).

 Ricerca istantanea (client-side) su Nome/Annata/Cantina.

 Paginazione (50 righe/pagina).

 CSV scaricabile quando token valido; errore chiaro se scaduto.

 Nessun elemento decorativo (NO pennellate/NO pallini).

 Responsive semplice (â‰¤ 980px: stack verticale).

ğŸ” Sicurezza (sintesi)
Il token Ã¨ obbligatorio (?token=...).

Nessun accesso diretto al DB: sempre via Processor.

Se la chiamata snapshot fallisce con 401/410 â†’ non mostrare dati.

(Opzionale lato backend) token single-use con jti.

ğŸ“¦ Deploy
Static hosting (Vercel/Railway/Netlify): pubblica cosÃ¬ comâ€™Ã¨.

Assicurati che CORS del Processor consenta GET dal dominio del viewer, se diverso.

ğŸ§­ Ruoli e responsabilitÃ 
Cursor â€” Automatico

Scaffold progetto (file/struttura).

Implementazione UI mockup 1 pulito (HTML/CSS/JS).

Fetch snapshot + filtri + ricerca + CSV + paginazione.

Mock dati se non ho ancora il backend.

Checklist sopra tutta verde prima della PR.

Io â€” Manuale (guidami passo-passo)

Fornire logo (/assets/logo.png).

Fornire API base (se diversa).

Fornire token di test (o chiedimi come generarlo).

Provare su localhost con ?token=....

Confermare il deploy (dominio finale) e aggiornare apiBase se serve.

Cursor: per ogni punto â€œmanualeâ€, dimmi esattamente che comando eseguire, quale file toccare e come validare (screenshot/URL/risultato atteso). Se vedi una scelta migliore, adattala in autonomia e spiegami perchÃ© nella PR.

Versione: 1.0
Mockup scelto: â€œViewer pulitoâ€ (senza sfondi decorativi)
Brand: Granaccia / Bianco / Nero

makefile
Copia codice

::contentReference[oaicite:0]{index=0}